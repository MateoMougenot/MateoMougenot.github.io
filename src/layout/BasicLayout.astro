---
const { 
  title = "Matéo Mougenot - Motion & Video Designer",
  description = "Motion Designer et Vidéographe spécialisé en montage vidéo et motion design. Découvrez mes projets et créations visuelles.",
  image = "/og-image.jpg",
  url = "https://mateo-mougenot.com"
} = Astro.props;
import "../styles/global.css";
---

<!DOCTYPE html>
<html lang="fr">
<head>
    <!-- Caractères et viewport -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- SEO Meta Tags -->
    <title>{title}</title>
    <meta name="description" content={description}>
    <meta name="author" content="Matéo Mougenot">
    <meta name="theme-color" content="#000000">
    <link rel="canonical" href={url}>
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content={url}>
    <meta property="og:title" content={title}>
    <meta property="og:description" content={description}>
    <meta property="og:image" content={image}>
    <meta property="og:locale" content="fr_FR">
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content={title}>
    <meta name="twitter:description" content={description}>
    <meta name="twitter:image" content={image}>
    
    <!-- Favicon & Icons -->
    <link rel="icon" type="image/png" href="/favicon.jpg" />
    <link rel="apple-touch-icon" href="/favicon.jpg" />
    
    <!-- Preconnect to external resources -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <!-- JSON-LD Schema -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Person",
      "name": "Matéo Mougenot",
      "url": "https://mateo-mougenot.com",
      "image": "https://mateo-mougenot.com/photo-mateo.jpg",
      "jobTitle": "Motion Designer & Video Creator",
      "description": "Motion Designer et Vidéographe spécialisé en montage vidéo et motion design."
    }
    </script>
</head>
<body>
    <!-- Skeleton Loader -->
    <div id="skeleton-loader" class="fixed inset-0 bg-black z-50 flex items-center justify-center">
        <div class="space-y-8 w-full max-w-6xl px-6">
            <!-- Hero Skeleton -->
            <div class="h-screen flex flex-col justify-center space-y-6 animate-pulse">
                <div class="h-16 bg-white/10 rounded-lg w-3/4"></div>
                <div class="h-8 bg-white/10 rounded-lg w-1/2"></div>
                <div class="h-12 bg-white/10 rounded-lg w-48"></div>
            </div>
        </div>
    </div>

    <slot/>

    <script>
        // Masquer le skeleton loader quand la page est chargée
        window.addEventListener('load', () => {
            const loader = document.getElementById('skeleton-loader');
            if (loader) {
                loader.style.opacity = '0';
                loader.style.pointerEvents = 'none';
                loader.style.transition = 'opacity 0.6s ease-out';
            }
        });

        // Lazy loading pour images et vidéos
        if ('IntersectionObserver' in window) {
            const imageObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const img = entry.target;
                        if (img.dataset.src) {
                            img.src = img.dataset.src;
                            img.removeAttribute('data-src');
                        }
                        imageObserver.unobserve(img);
                    }
                });
            }, { rootMargin: '50px' });

            document.querySelectorAll('img[data-src]').forEach(img => imageObserver.observe(img));

            // Lazy loading vidéos
            const videoObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const video = entry.target;
                        if (video.dataset.src) {
                            const source = document.createElement('source');
                            source.src = video.dataset.src;
                            source.type = video.dataset.type || 'video/mp4';
                            video.appendChild(source);
                            video.removeAttribute('data-src');
                        }
                        videoObserver.unobserve(video);
                    }
                });
            }, { rootMargin: '100px' });

            document.querySelectorAll('video[data-src]').forEach(video => videoObserver.observe(video));
        }
    </script>
</body>
</html>